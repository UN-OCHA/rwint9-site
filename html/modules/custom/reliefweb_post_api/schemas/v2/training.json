{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://reliefweb.int/post-api-schemas/v2/training.json",
  "title": "ReliefWeb POST API schema - training resource",
  "type": "object",
  "properties": {
    "url": {
      "description": "Unique URL to identify the document. Use the original canonical of the document if available.",
      "type": "string",
      "format": "iri",
      "maxLength": 2048
    },
    "uuid": {
      "description": "The universally unique identifier (UUID) version 5 generated from the URL property above, with the namespace: '8e27a998-c362-5d1f-b152-d474e1d36af2'.",
      "type": "string",
      "format": "uuid"
    },
    "title": {
      "description": "Document title.",
      "type": "string",
      "minLength": 10,
      "maxLength": 255,
      "allOf": [
        {
          "description": "Must contain letters (any language).",
          "pattern": "\\p{L}+"
        },
        {
          "description": "No control characters or separators except for spaces.",
          "pattern": "^([^\\p{Z}\\p{C}]|[ \u3000])+$"
        }
      ],
      "not": {
        "description": "No leading, trailing or consecutive spaces.",
        "pattern": "(?:^[ \u3000]|[ \u3000]$|[ \u3000]{2,})"
      }
    },
    "source": {
      "description": "Training source(s) as a list of IDs from https://api.reliefweb.int/v1/sources.",
      "type": "array",
      "items": {
        "type": "integer"
      },
      "minItems": 1,
      "maxItems": 30
    },
    "training_format": {
      "description": "Training format as a single ID from https://api.reliefweb.int/v1/references/training-formats.",
      "type": "array",
      "items": {
        "type": "integer"
      },
      "minItems": 1,
      "maxItems": 1
    },
    "country": {
      "description": "Training country(ies) as a list of IDs from https://api.reliefweb.int/v1/countries.",
      "type": "array",
      "items": {
        "type": "integer"
      },
      "minItems": 1,
      "maxItems": 300
    },
    "city": {
      "description": "City. Optional and only relevant when a country is also set.",
      "type": "string",
      "minLength": 0,
      "maxLength": 255,
      "allOf": [
        {
          "description": "Must contain letters (any language).",
          "pattern": "\\p{L}+"
        },
        {
          "description": "No control characters or separators except for spaces.",
          "pattern": "^([^\\p{Z}\\p{C}]|[ \u3000])+$"
        }
      ],
      "not": {
        "description": "No leading, trailing or consecutive spaces.",
        "pattern": "(?:^[ \u3000]|[ \u3000]$|[ \u3000]{2,})"
      }
    },
    "training_date_start": {
      "description": "Start training date (ISO 8601) of the document.",
      "type": "string",
      "format": "date-time"
    },
    "training_date_end": {
      "description": "End training date (ISO 8601) of the document.",
      "type": "string",
      "format": "date-time"
    },
    "registration_deadline": {
      "description": "Registration deadline (ISO 8601) of the document.",
      "type": "string",
      "format": "date-time"
    },
    "event_url": {
      "description": "Unique URL to the event.",
      "type": "string",
      "format": "iri",
      "maxLength": 2048
    },
    "cost": {
      "description": "Cost of the training.",
      "type": "decimal"
    },
    "fee_information": {
      "description": "This field must contain the exact course fee (including what it does and does not cover) and cannot be substituted by providing a link.",
      "type": "string",
      "minLength": 10,
      "maxLength": 100000,
      "allOf": [
        {
          "description": "Must contain letters (any language).",
          "pattern": "\\p{L}+"
        },
        {
          "description": "No control characters or separators except for spaces and new lines.",
          "pattern": "^(?:[^\\p{Z}\\p{C}]|[ \u3000\\n])+$"
        }
      ],
      "not": {
        "description": "No leading, trailing or consecutive spaces and new lines (except at the end of a line to support markdown linebreaks).",
        "pattern": "(?:^[ \u3000\\n]|[ \u3000\\n]$|[ \u3000]{2,}[^ \u3000\\n])"
      }
    },
    "training_type": {
      "description": "Training type as a single ID from https://api.reliefweb.int/v1/references/training-types.",
      "type": "array",
      "items": {
        "type": "integer"
      },
      "minItems": 1,
      "maxItems": 1
    },
    "training_language": {
      "description": "Training language(s) as a list of IDs from https://api.reliefweb.int/v1/references/languages.",
      "type": "array",
      "items": {
        "type": "integer"
      },
      "minItems": 1,
      "maxItems": 10
    },
    "career_categories": {
      "description": "Training career category as a list of IDs from https://api.reliefweb.int/v1/references/career-categories. Optionally leave blank for automatic tagging by AI based on the job's title and body.",
      "type": "array",
      "items": {
        "type": "integer"
      },
      "maxItems": 1
    },
    "theme": {
      "description": "Training theme(s) as a list of IDs from https://api.reliefweb.int/v1/references/themes. Optionally leave blank for automatic tagging by AI based on the job's title and body.",
      "type": "array",
      "items": {
        "type": "integer"
      },
      "maxItems": 3
    },
    "language": {
      "description": "Document language(s) as a list of IDs from https://api.reliefweb.int/v1/references/languages.",
      "type": "array",
      "items": {
        "type": "integer"
      },
      "minItems": 1,
      "maxItems": 10
    },
    "body": {
      "description": "Training content in markdown or html (supported tags: <h1> <h2> <h3> <h4> <h5> <h6> <br> <p> <strong> <em> <a> <ul> <ol> <li> <blockquote>).",
      "type": "string",
      "minLength": 10,
      "maxLength": 100000,
      "allOf": [
        {
          "description": "Must contain letters (any language).",
          "pattern": "\\p{L}+"
        },
        {
          "description": "No control characters or separators except for spaces and new lines.",
          "pattern": "^(?:[^\\p{Z}\\p{C}]|[ \u3000\\n])+$"
        }
      ],
      "not": {
        "description": "No leading, trailing or consecutive spaces and new lines (except at the end of a line to support markdown linebreaks).",
        "pattern": "(?:^[ \u3000\\n]|[ \u3000\\n]$|[ \u3000]{2,}[^ \u3000\\n])"
      }
    },
    "how_to_register": {
      "description": "The requirements for this field are: the application procedure/condition(s) and contact details.",
      "type": "string",
      "minLength": 10,
      "maxLength": 100000,
      "allOf": [
        {
          "description": "Must contain letters (any language).",
          "pattern": "\\p{L}+"
        },
        {
          "description": "No control characters or separators except for spaces and new lines.",
          "pattern": "^(?:[^\\p{Z}\\p{C}]|[ \u3000\\n])+$"
        }
      ],
      "not": {
        "description": "No leading, trailing or consecutive spaces and new lines (except at the end of a line to support markdown linebreaks).",
        "pattern": "(?:^[ \u3000\\n]|[ \u3000\\n]$|[ \u3000]{2,}[^ \u3000\\n])"
      }
    }
  },
  "required": [
    "url",
    "uuid",
    "title",
    "source",
    "event_url",
    "language",
    "career_categories",
    "training_language",
    "body",
    "how_to_register"
  ],
  "additionalProperties": false
}
