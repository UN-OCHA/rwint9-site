id: reliefweb_user__default
label: Migrate ReliefWeb default users.
migration_group: reliefweb
dependencies:
  enforced:
    module:
      - reliefweb_migrate
source:
  plugin: embedded_data
  data_rows:
    -
      # This user ID is not in used.
      uid: 2
      name: 'System'
      pass: ''
      mail: ''
      status: 1
      timezone: 'UTC'
      # Review if we should add some roles like Editor to ensure this user can
      # perform editorial tasks, have access to entities etc.
      roles: null
  ids:
    uid:
      type: integer
destination:
  plugin: entity:user
process:
  uid: uid
  name: name
  pass: pass
  mail: mail
  status: status
  timezone: timezone
  langcode:
    plugin: user_langcode
    source: language
    fallback_to_site_default: true
  preferred_langcode:
    plugin: user_langcode
    source: language
    fallback_to_site_default: true
  preferred_admin_langcode:
    plugin: user_langcode
    source: language
    fallback_to_site_default: true
  roles:
    plugin: static_map
    default_value: null
    source: roles
    map:
      6: administrator
      8: beta_tester
      3: editor
      14: external_disaster_manager
      9: user_manager
      7: webmaster
  # Fields.
  field_notes/value:
    plugin: default_value
    default_value: 'System account used for automated tasks/changes'
  # Disable path alias generation as aliases are already imported.
  path/pathauto:
    plugin: default_value
    default_value: 0
  path/alias:
    -
      plugin: default_value
      default_value: ''
    -
      plugin: skip_on_empty
      method: process
migration_dependencies:
  optional:
    - language
    - default_language
